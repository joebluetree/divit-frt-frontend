<div class="page-header">
  <h5>{{title}}</h5>
  <button *ngIf="bAdd" class="btn btn-sm btn-success" routerLink="/masters/wiretransmEdit"
    [queryParams]="{id :0, _id:id+1,mode:'add',menuid:menuid,type:type,appid:appid}">New</button>
  <button class="btn btn-success btn-sm" (click)="return2Parent()">Return</button>
</div>

<form [formGroup]="mform">
  <div class="page-body">
    <div class="row">
      <div class="col-sm-6">
        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">RefNo</label>
          <div class="col-sm-8">
            <app-input maxlength="15" formControlName="wtim_refno" [case]="'UPPER'" id="wtim_refno" name="wtim_refno"
            [disable]="true"></app-input>
          </div>
        </div>
        
        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">To</label>
          <div class="col-sm-8">
            <app-input maxlength="15" formControlName="wtim_to_name" [case]="'UPPER'" required></app-input>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">Company</label>
          <div class="col-sm-8">
            <auto-complete formControlName="wtim_cust_code" id="wtim_cust_code" (CallBack)="callBack($event)"
              [table]="'customerm'" [company_id]="getCompanyId()" [url]="url" required
              display_column="[{'caption':'CODE','value':'cust_code'},{'caption':'NAME','value':'cust_name'}]"></auto-complete>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for=""></label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_cust_name" [case]="'UPPER'" required></app-input>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">Fax</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_cust_fax" [case]="'UPPER'" ></app-input>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm">Tel</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_cust_tel" [case]="'UPPER'" ></app-input>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm">A/c No</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_acc_no" [case]="'UPPER'" required></app-input>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">Request.Type
          </label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_req_type" [case]="'UPPER'" required></app-input>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">From</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_from_name" [case]="'UPPER'" required></app-input>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm">Date</label>
          <div class="col-sm-8">
            <app-date formControlName="wtim_date" [format]="gs.globalConstants.global_date_format" required></app-date>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm">SenderRef#</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_sender_ref" [case]="'UPPER'"></app-input>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm">YourRef#</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="wtim_your_ref" [case]="'UPPER'"></app-input>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="page-body">
    <div class="row">
      <label class="col-sm-2 form-label form-lable-sm"></label>
      <div class="col-sm-10">
        <div class="form-group row">
          <div class="col-sm-12">
            <app-checkbox formControlName="wtim_is_urgent" name="wtim_is_urgent" ></app-checkbox>
             <label class="col-sm-2 form-label form-lable-sm" for="">Urgent</label>
            <app-checkbox formControlName="wtim_is_review" name="wtim_is_review" ></app-checkbox>
             <label class="col-sm-2 form-label form-lable-sm" for="">Review</label>
            <app-checkbox formControlName="wtim_is_comment" name="wtim_is_comment" ></app-checkbox>
             <label class="col-sm-2 form-label form-lable-sm" for="">Comment</label>
            <app-checkbox formControlName="wtim_is_reply" name="wtim_is_reply" ></app-checkbox>
             <label class="col-sm-2 form-label form-lable-sm" for="">Reply</label>
            <app-checkbox formControlName="wtim_is_recycle" name="wtim_is_recycle" ></app-checkbox>
             <label class="col-sm-2 form-label form-lable-sm" for="">Recycle</label>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="page-body">
    <div class="row">
      <div class="col-sm-12">
        <table class="table table-sm table-hover table-bordered table-striped table-condensed">
          <thead class="table-success">
            <tr class="table-header">
              <th *ngIf="showModel">ID</th>
              <th>BENEFICIARY</th>
              <th>BANK</th>
              <th>REFERENCE</th>
              <th>AMOUNT</th>
              <th>ADD</th>
              <th>DELETE</th>
            </tr>
          </thead>
          <tbody formArrayName="wtim_details">
            <tr *ngFor="let iRow of formArray('wtim_details').controls; let i=index;" [formGroupName]="i">
              <td *ngIf="showModel">
                <label>{{iRow.get('wtid_id')?.value}}</label>
              </td>
              <td>
                <auto-complete formControlName="wtid_benef_name" id="wtid_benef_name" name="wtid_benef_name" (CallBack)="callBack($event)"
              [table]="'customerm'" [company_id]="getCompanyId()" [url]="url" required
              display_column="[{'caption':'CODE','value':'cust_code'},{'caption':'NAME','value':'cust_name'}]"></auto-complete>
              </td>
              <td>
                <auto-complete formControlName="wtid_bank_name" id="wtid_bank_name" name="wtid_bank_name" (CallBack)="callBack($event)"
              [table]="'customerm'" [company_id]="getCompanyId()" [url]="url" required
              display_column="[{'caption':'CODE','value':'cust_code'},{'caption':'NAME','value':'cust_name'}]"></auto-complete>
              </td>
              <td>
                <app-input maxlength="100" formControlName="wtid_benef_ref" [rowIndex]="i" name="wtid_benef_ref"
                  case="UPPER"></app-input>
              </td>
              <td>
                <app-input maxlength="100" formControlName="wtid_trns_amt" [rowIndex]="i" name="wtid_trns_amt" 
                [dec]="gs.globalConstants.global_dec_places" type="number" case="UPPER"></app-input>
              </td>
              
              <td align="centre" (click)="addDetails()" class="link">
                <i class="fa fa-plus"></i>
              </td>

              <td align="centre" (click)="deleteRow(i)" class="link">
                <i class="fa fa-trash"></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row" *ngIf="formArray('wtim_details').length <= 0">
      <div class="col-sm-12 text-center">
        <button class="btn btn-sm btn-info" (click)="addDetails()" [disabled]="mform.invalid">Add Details</button>
      </div>
    </div>
  </div>
  <div class="page-body">
    <div class="row">
      <div class="col-sm-12">
        <div class="form-group row">
          <label class="col-sm-3 form-label form-lable-sm" for="">Remarks</label>
          <div class="col-sm-8">
            <app-input maxlength="15" formControlName="wtim_remarks" [case]="'UPPER'" id="wtim_refno"
             name="wtim_remarks" ></app-input>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>

<div class="page-footer line-bottom">
  <button *ngIf="bAdd || bEdit" class="btn btn-sm btn-success" (click)="save()" [disabled]="mform.invalid">Save</button>
</div>

<div *ngIf="showModel">
  <pre>
    {{mform.value | json}}
  </pre>
</div>