<div class="page-header">
  <h5>Documenents</h5>
  <button class="btn btn-success btn-sm" (click)="onNoClick()">Close</button>
  <!-- <app-history [inputdata]="{table: 'mast_mail_serverm', id:id}"></app-history> -->
  <!-- <button class="btn btn-success btn-sm" (click)="onNoClick()">Return</button> -->
</div>
<form [formGroup]="mform">
  <div class="page-body">
    <div class="row">
      <div class="col-sm-6">
        <div class="form-group row" *ngIf="mode=='add'">
          <label class="col-sm-4 form-label form-lable-sm" for="">File</label>
          <div class="col-sm-8">
            <input type="file" multiple (change)="onFileChange($event)">
          </div>
        </div>
        <!-- <div class="form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">FileName</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="files_desc" [case]="'upper'" ></app-input>
          </div>
        </div> -->

        <div class=" form-group row">
          <label class="col-sm-4 form-label form-lable-sm" for="">Ref#</label>
          <div class="col-sm-8">
            <app-input maxlength="100" formControlName="files_ref_no" [case]="'upper'" ></app-input>
          </div>
        </div>
        <div class=" form-group row mt-1">
          <label class="col-sm-4 form-label form-lable-sm" for=""></label>
          <div class="col-sm-8">
            <button class="btn btn-sm btn-success" (click)="save()" [disabled]="mform.invalid">Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="page-body line-bottom">
    <div class="row">
      <div class="col-sm-12">
        <table class="table table-sm table-hover table-bordered table-striped table-condensed">
          <thead class="table-success">
            <tr class="table-header">
              <th>EDIT</th>
              <th *ngIf="showModel">ID</th>
              <th *ngIf="showModel">PARENT-ID</th>
              <th>FILES PATH</th>
              <th>FILES REF NO</th>
              <!-- <th>DESC</th> -->
              <th>CREATED-BY</th>
              <th>CREATED-DT</th>
              <th *ngIf="showModel">EDITED-BY</th>
              <th *ngIf="showModel">EDITED-DT</th>
              <th>DELETE</th>
            </tr>
          </thead>
          <tbody formArrayName="fileupload">
            <tr *ngFor="let iRow of formArray('fileupload').controls; let i = index;" [formGroupName]="i">
              <td align="centre" (click)="editdetails(iRow.get('files_id')?.value)" class="link">
                <i class="fa fa-pencil"></i>
              </td>
              <td *ngIf="showModel">
                {{ iRow.get('files_id')?.value }}
              </td>
              <td *ngIf="showModel">
                {{ iRow.get('files_parent_id')?.value }}
              </td>
              <td>
                {{ iRow.get('files_path')?.value }}
              </td>
              <td>
                {{ iRow.get('files_ref_no')?.value }}
              </td>
              <!-- <td>
                {{ iRow.get('files_desc')?.value }}
              </td> -->
              <td>
                {{ iRow.get('rec_created_by')?.value }}
              </td>
              <td>
                {{ iRow.get('rec_created_date')?.value |
                date: gs.globalConstants.global_output_datetime_format }}
              </td>
              <td *ngIf="showModel">
                {{ iRow.get('rec_edited_by')?.value }}
              </td>
              <td *ngIf="showModel">
                {{ iRow.get('rec_edited_date')?.value |
                date: gs.globalConstants.global_output_datetime_format }}
              </td>
              <td align="center"
                (click)="deleteRow(i, iRow.get('files_ref_no')?.value, iRow.get('files_id')?.value)" class="link">
                <i class="fa fa-trash"></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</form>

<div *ngIf="showModel">
  <pre>
    {{mform.value | json}}
  </pre>
</div>